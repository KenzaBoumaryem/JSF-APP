<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:b="http://bootsfaces.net/ui">
<h:head>
    <title>Liste des Fournisseurs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <style>
        /* Styles similaires à ceux de la première page */
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --light-bg: #ecf0f1;
            --white: #ffffff;
        }

        body {
            background: var(--light-bg);
            color: var(--primary-color);
        }

        .header {
            background: var(--primary-color);
            padding: 1rem;
            color: var(--white);
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .dataTable thead th {
            background: var(--primary-color);
            color: var(--white);
        }

        .dataTable tbody tr:hover {
            background: rgba(52, 152, 219, 0.05);
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .btn-success {
            background: var(--accent-color);
            color: var(--white);
        }

        .btn:hover {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</h:head>
<h:body>
    <div class="header">Liste des Fournisseurs</div>

    <div class="content" style="padding: 2rem;">
        <h:form>
            <b:dataTable value="#{providerController.loadProviders()}" var="provider"
                         styleClass="dataTable"
                         responsive="true"
                         searching="true"
                         paginated="true"
                         page-length="10">
                <b:dataTableColumn value="#{provider.name}" label="Nom du Fournisseur"/>
                <b:dataTableColumn label="Actions">
                    <h:commandButton value="Voir Produits" action="#{providerController.selectProvider(provider)}"
                                     styleClass="btn btn-success">
                    </h:commandButton>
                </b:dataTableColumn>
            </b:dataTable>
        </h:form>

        <h:panelGroup rendered="#{providerController.selectedProvider != null}" style="margin-top: 2rem;">
            <h2>Produits pour : #{providerController.selectedProvider.name}</h2>
            <h:form>
                <b:dataTable value="#{providerController.selectedProvider.products}" var="product"
                             styleClass="dataTable"
                             responsive="true">
                    <b:dataTableColumn value="#{product.name}" label="Nom du Produit"/>
                    <b:dataTableColumn value="#{product.description}" label="Description"/>
                    <b:dataTableColumn value="#{product.price}" label="Prix"/>
                    <b:dataTableColumn label="Sélectionner">
                        <h:selectBooleanCheckbox value="#{providerController.selectedProducts[product.id]}"/>
                    </b:dataTableColumn>
                    <b:dataTableColumn label="Quantité">
                        <h:inputText value="#{providerController.selectedQuantities[product.id]}"
                                     converter="javax.faces.Integer" />

                    </b:dataTableColumn>

                </b:dataTable>
                <h:commandButton value="Ajouter Produits" action="#{providerController.submitSelection}" styleClass="btn btn-success"/>

            </h:form>
        </h:panelGroup>
    </div>

    <div>
        <h:panelGroup rendered="#{!providerController.cart.isEmpty()}" style="margin-top: 2rem;">
            <h2>Panier</h2>
            <h:form>
                <b:dataTable value="#{providerController.cart}" var="product" styleClass="dataTable" responsive="true">
                    <b:dataTableColumn value="#{product.name}" label="Nom du Produit"/>
                    <b:dataTableColumn value="#{product.description}" label="Description"/>
                    <b:dataTableColumn value="#{product.price * product.quantity}" label="Prix Total"/>
                    <b:dataTableColumn value="#{product.quantity}" label="Quantité"/>
                    <b:dataTableColumn value="#{product.provider.name}" label="Fournisseur"/>
                    <b:dataTableColumn label="Supprimer">
                        <h:commandButton value="X" action="#{providerController.removeFromCart(product)}" styleClass="btn btn-danger"/>
                    </b:dataTableColumn>
                </b:dataTable>
                <h:commandButton value="Confirmer la commande" action="#{providerController.confirmOrder}" styleClass="btn btn-success"/>

            </h:form>
        </h:panelGroup>

    </div>
</h:body>
</html>
